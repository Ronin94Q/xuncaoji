<!--pages/myorder/myorder.wxml-->
<view class="orderTab-wrap">
  <scroll-view scroll-x class='orderTab'>
    <view class="orderTabItem" wx:for='{{orderTabItem}}' data-current="{{idx}}" wx:key="{{item.title}}" bindtap='tab' data-index="{{index}}" data-status="{{item.status}}">
      <view class="order-item">
        <view class="tabTitle {{item.select==true?'active':''}}">{{item.title}}</view>
      </view>
    </view>
  </scroll-view>
</view>
<!--全部-->
<view class="myOrder-wrapper-content">
  <view class="myOrder-wrapper" wx:for="{{allOrder}}" wx:for-item="itemName" wx:key="{{itemName.id}}" wx:if="{{allOrder.length>0}}">
    <view class="shop-container">
      <view class="shop">
        <text class="state" wx:if="{{itemName.latestStatus==1}}">待支付</text>
        <text class="state" wx:if="{{itemName.latestStatus==2}}">待发货</text>
        <text class="state" wx:if="{{itemName.latestStatus==3}}">待使用</text>
        <text class="state" wx:if="{{itemName.latestStatus==4}}">待收货</text>
        <text class="state" wx:if="{{itemName.latestStatus==5}}">待评价</text>
        <text class="state" wx:if="{{itemName.latestStatus==6}}">已完成</text>
        <text class="state" wx:if="{{itemName.latestStatus==7}}">退款中</text>
        <text class="state" wx:if="{{itemName.latestStatus==8}}">退款中</text>
        <text class="state" wx:if="{{itemName.latestStatus==9}}">取消退款</text>
        <text class="state" wx:if="{{itemName.latestStatus==10}}">退款成功</text>
        <text class="state" wx:if="{{itemName.latestStatus==11}}">退款失败</text>
        <text class="state" wx:if="{{itemName.latestStatus==12}}">已取消</text>
      </view>
      <!-- 商品 -->
      <view class="shops-wrap-bottom" catchtap='jumpOrderDetail' data-url="/pages/orderDetail/orderDetail?orderId={{itemName.id}}" wx:for="{{itemName.orderGoodsDetail}}" wx:key="{{item.id}}">
        <image class="shops-wrap-bottom-img" src="{{item.imageUrl}}"></image>
        <view class="shops-wrap-bottom-right">
          <view class="shops-wrap-bottom-right-item">
            <view class="shops-wrap-bottom-title">{{item.goodsName}}
            </view>
            <view class="shops-wrap-bottom-size">
              {{item.specDesc}}
            </view>
          </view>
          <view class="shops-wrap-bottom-right-list">
            <view class="shops-wrap-bottom-price">
              <text>￥</text>
              <text class="price1">{{item.price}}</text>
            </view>
            <view class="shops-wrap-bottom-num">
              <text>x</text>
              <text>{{item.quantity}}</text>
            </view>
          </view>
        </view>
      </view>
      <!-- 付款 -->
      <view class="bottom">
        <view class="all">
          <text class="num">共{{itemName.quantity}}件</text>
          <view class="price">
            合计：
            <text class="sign">￥</text>
            <text class="text">{{itemName.orderAmount}}</text>
          </view>
        </view>
      </view>
    </view>
    <!-- 底部按钮 -->
    <view class="button">
      <!-- <text class="stopzero" catchtap="stopZero">终止0元购</text> -->
      <text class="cancel" wx:if="{{itemName.latestStatus==1}}" catchtap='cancelOrder' data-orderid="{{itemName.id}}">取消订单</text>
      <text class="return-money" wx:if="{{itemName.isCashBack==true}}" catchtap='periodCash' data-lateststatus="{{itemName.latestStatus}}" data-orderid="{{itemName.id}}">分期返现</text>
      <text class="return" catchtap='refund' data-orderid="{{itemName.id}}" wx:if="{{itemName.latestStatus==2 || itemName.latestStatus==5 || itemName.latestStatus==11}}">退款</text>
      <text class="return" catchtap='cancelRefund' wx:if="{{itemName.latestStatus==7 || itemName.latestStatus==8}}" data-orderid="{{itemName.id}}">取消退款</text>
      <text class="pay" wx:if="{{itemName.latestStatus==1}}" catchtap='toPay' data-id="{{itemName.transStatementDetail.transId}}" data-orderid="{{itemName.id}}">付款</text>
      <text class="pay" catchtap='toEvaluate' data-orderid="{{itemName.id}}" wx:if="{{itemName.latestStatus==5}}">去评价</text>
      <text class="pay" catchtap='confirmReceipt' data-orderid="{{itemName.id}}" wx:if="{{itemName.latestStatus==4}}">确认收货</text>
    </view>
  </view>
  <!-- 否则 -->
  <view wx:if="{{allOrder.length===0}}">
    <!-- 外层 -->
    <view class='cont_count'>
      <image src="../../assets/images/icon/ic_order_no.png"></image>
      <label class='none_tab'>您还没有任何订单呢~</label>
    </view>
  </view>
</view>
<view class="remmend" wx:if="{{allOrder.length<=2}}">
  <!--更多好货-->
  <view class="recommend-title">
    <view class="recommend-left">
      <image src="../../assets/images/icon/fiery_orange_n.png"></image>
    </view>
    <view class="recommend-middle">
      更多好货
    </view>
  </view>
  <view class="recommend-list-wrapper">
    <view class="recommend-list" wx:for="{{list}}" wx:key="{{item.id}}" data-id="{{item.id}}" bindtap='toDetail'>
      <view class="recommend-list-img">
        <image src="{{item.imageUrls[0]}}"></image>
      </view>
      <view class="recommend-list-text">
        <text class="item1" wx:if="{{item.tags==1}}">自营</text>
        <text class="item2">可申请0元购</text>{{item.name}}</view>
      <view class="recommend-list-price">
        <view class="newprice">
          <text>￥</text>{{item.truePrice}}</view>
        <view class="oldprice">￥{{item.orgPrice}}</view>
      </view>
      <view class="return-wrap">
        <view class="return-moneypay">
          <text>实付</text>
          <text>￥</text>
          <text>{{item.dctPrice}}</text>
        </view>
        <view class="pay-money">
          <text>返现</text>
          <text>￥</text>
          <text>{{item.marketingCashBack.totalAmount}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
<view class="myorder-bottom" wx:if="{{allOrder.length>2}}">{{text}}</view>
<view class="myorder-bottom1" wx:if="{{allOrder.length<2}}">{{text1}}</view>
<!-- 确认收货弹框 -->
<view class="comfirm-zan-dialog__mask" catchtouchmove="preventTouchMove" wx:if="{{showDialog}}"></view>
<view class="comfirm-zan-dialog__container" wx:if="{{showDialog}}">
  <view class='comfirm-content'>
    <view class="comfirm-content-title">提示</view>
    <view class="comfirm-content-container">确认收货
    </view>
    <view class="comfirm-content-button">
      <view class="comfirm-reject" catchtap='cancel'>取消</view>
      <button class="comfirm-comfirm" bindtap="allow">收货</button>
    </view>
  </view>
</view>
<!-- 取消退款 -->
<view class="cancelorder-zan-dialog__mask" catchtouchmove="preventTouchMove" wx:if="{{showDialog1}}"></view>
<view class="cancelorder-zan-dialog__container" wx:if="{{showDialog1}}">
  <view class='cancelorder-content'>
    <view class="cancelorder-content-title">提示</view>
    <view class="cancelorder-content-container">是否取消当前订单退款申请？
    </view>
    <view class="cancelorder-content-button">
      <view class="cancelorder-reject" catchtap='cancelrefund'>取消</view>
      <button class="cancelorder-comfirm" bindtap="surerefund">确定</button>
    </view>
  </view>
</view>
<!-- 退款弹框 -->
<view class="zan-dialog2 {{ showDialog2 ? 'zan-dialog--show2' : '' }}">
  <view class="zan-dialog__mask2" />
  <view class="zan-dialog__container2">
    <view class='contentainer2'>
      <view class="contentainer2-title">申请退款</view>
      <view class="contentainer2-content">
        <view class="contentainer2-content-text {{current == index ?'active1':''}}" bindtap="getText" wx:for="{{refund}}" wx:for-item="reasons" wx:key="{{reasons}}" data-current="{{index}}" data-text="{{reasons}}">{{reasons}}</view>
      </view>
      <view class="contentainer2-text">提示：申请退款前请与商家电话沟通后在进行申请，将减少商家拒绝申请退款概率</view>
      <view class="contentainer2-button">
        <view class="reject" bindtap='refundDialog'>取消</view>
        <button class="comfirm" bindtap="application">申请退款</button>
      </view>
    </view>
  </view>
</view>
<!-- 取消订单 -->
<view class="zan-dialog3 {{ showDialog3 ? 'zan-dialog--show3' : '' }}">
  <view class="zan-dialog__mask3" />
  <view class="zan-dialog__container3">
    <view class='contentainer3'>
      <view class="contentainer3-title">取消订单</view>
      <view class="contentainer3-content">
        <view class="contentainer3-content-text {{current == index ?'active1':''}}" bindtap="getText1" wx:for="{{cancelOrder}}" wx:for-item="reasons1" wx:key="{{reasons1}}" data-current="{{index}}" data-text="{{reasons1}}">{{reasons1}}</view>
      </view>
      <view class="contentainer3-button">
        <view class="reject" bindtap='cancelorder'>取消</view>
        <button class="comfirm" bindtap="sureorder">确定</button>
      </view>
    </view>
  </view>
</view>
<!-- 终止0元购弹窗 -->
<view class="stop-zan-dialog__mask" catchtouchmove="preventTouchMove" wx:if="{{showDialog4}}"></view>
<view class="stop-zan-dialog__container" wx:if="{{showDialog4}}">
  <view class='stop-content'>
    <view class="stop-content-title">提示</view>
    <view class="stop-content-container">
      <view>确定终止0元购吗？</view>
      <view>此刻取消将退您：99元</view>
    </view>
    <view class="stop-content-button">
      <view class="stop-reject" catchtap='wait'>再想想</view>
      <button class="stop-comfirm" bindtap="comfireCancel">确定取消</button>
    </view>
  </view>
</view>
<!-- 去评价 -->
<!-- <view class="zan-showDialog4 {{ showDialog4 ? 'zan-dialog--show4' : '' }}">
  <view class="zan-dialog__mask4" />
  <view class="zan-dialog__container4">
    <view class='contentainer4'>
      <view class="contentainer4-title">商品评价</view>
      <view class="contentainer4-item">
        <view class="contentainer4-left-text">商品评分</view>
        <view class="contentainer4-left-start">
          <block wx:for="{{one_2}}" wx:key="index">
            <image catchtap='in_xin' id='{{index+1}}' data-in='use_sc2' src='../../assets/images/icon/pingj_xinxin.png'></image>
          </block>
          <block wx:for="{{two_2}}" wx:key="index">
            <image catchtap='in_xin' id='{{index+1}}' data-in='use_sc' src='../../assets/images/icon/pingj_xinxin_l.png'></image>
          </block>
        </view>
      </view>
      <view class="textarea-wrp">
        <textarea wx:if="{{!multiShow}}" fixed="true" value="{{evaluate}}" bindinput='input' maxlength="100" placeholder="您的评价是我们优化的目标" placeholder-style="color:#AAAAAA;" />
        <text class="currentWordNumber">{{currentNoteLen|0}}/{{noteMaxLen}}</text>
      </view>
      <view class="contentainer4-button">
        <view class="reject" bindtap='cancelEvaluate'>取消</view>
        <button class="comfirm" bindtap="sureEvaluate">发布评论</button>
      </view>
    </view>
  </view>
</view> -->